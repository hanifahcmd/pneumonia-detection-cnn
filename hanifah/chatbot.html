<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chatbot Kesehatan Gratis</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: #eef2f3;
        padding: 20px;
    }

    .chat-container {
        width: 380px;
        margin: auto;
        background: #fff;
        border-radius: 12px;
        padding: 12px;
        box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }

    .chat-box {
        height: 420px;
        overflow-y: auto;
        border: 1px solid #ddd;
        padding: 12px;
        border-radius: 10px;
        background: #fafafa;
    }

    .msg {
        padding: 10px 12px;
        border-radius: 10px;
        margin: 6px 0;
        max-width: 80%;
        white-space: pre-wrap;
    }

    .me {
        background: #4CAF50;
        color: white;
        margin-left: auto;
    }

    .bot {
        background: #e0e0e0;
        color: black;
    }

    .chat-input {
        display: flex;
        margin-top: 12px;
    }

    input {
        flex: 1;
        padding: 10px;
        border-radius: 5px;
        border: 1px solid #ccc;
    }

    button {
        margin-left: 10px;
        padding: 10px 15px;
        background: #4CAF50;
        border: none;
        color: white;
        border-radius: 5px;
        cursor: pointer;
    }
</style>
</head>

<body>

<div class="chat-container">
    <div class="chat-box" id="chatBox"></div>

    <div class="chat-input">
        <input type="text" id="messageInput" placeholder="Tanyakan tentang kesehatan...">
        <button onclick="sendMessage()">Kirim</button>
    </div>
</div>

<script>

// ===========================
// DATABASE JAWABAN KESEHATAN
// ===========================
const healthDB = {
    "demam": "Demam adalah peningkatan suhu tubuh di atas 38Â°C. Biasanya disebabkan infeksi virus atau bakteri. Istirahat dan minum banyak air sangat disarankan.",
    "batuk": "Batuk bisa terjadi karena infeksi, alergi, iritasi, atau asap. Jika batuk lebih dari 2 minggu, periksakan ke fasilitas kesehatan.",
    "flu": "Flu disebabkan virus influenza. Gejalanya demam, pilek, batuk, dan pegal. Istirahat cukup dan minum air hangat dapat membantu.",
    "hipertensi": "Hipertensi adalah tekanan darah tinggi. Hindari garam berlebih, rutin olahraga, dan kelola stres.",
    "darah tinggi": "Darah tinggi sama dengan hipertensi. Perlu gaya hidup sehat dan kontrol rutin.",
    "diabetes": "Diabetes terjadi karena kadar gula tinggi dalam darah. Biasanya terkait pola makan, kurang aktivitas, atau faktor genetik.",
    "sakit kepala": "Sakit kepala dapat disebabkan kurang tidur, stres, tegang, atau dehidrasi. Minum air dan istirahat biasanya membantu.",
    "stres": "Stres dapat dikurangi dengan relaksasi, pernapasan dalam, olahraga ringan, dan tidur cukup.",
    "maag": "Maag adalah iritasi lambung. Hindari makanan pedas, asam, kopi, dan makan tidak teratur.",
    "asam lambung": "Asam lambung berlebih menyebabkan nyeri ulu hati. Hindari makanan pemicu dan jangan langsung berbaring setelah makan.",
    "diare": "Diare sering disebabkan infeksi makanan/minuman. Banyak minum untuk mencegah dehidrasi."
};

// ===========================
// LOGIKA AI GRATIS (offline)
// Menggunakan pencocokan keyword + similarity
// ===========================
function getAIReply(question) {
    const msg = question.toLowerCase().trim();

    // Salam
    if (msg.includes("halo") || msg.includes("hai") || msg.includes("hi")) {
        return "Halo! Saya adalah chatbot kesehatan gratis. Apa yang ingin kamu tanyakan?";
    }

    // Terima kasih
    if (msg.includes("makasih") || msg.includes("terima kasih")) {
        return "Sama-sama! Senang bisa membantu.";
    }

    // Cari kecocokan langsung
    for (let key in healthDB) {
        if (msg.includes(key)) {
            return healthDB[key];
        }
    }

    // Smart Similarity Checking (AI ringan)
    const words = msg.split(" ");
    for (let key in healthDB) {
        for (let w of words) {
            if (similarity(w, key) > 0.6) {
                return healthDB[key];
            }
        }
    }

    // Jika tidak ditemukan
    return "Maaf, saya hanya bisa memberi informasi kesehatan umum. Coba gunakan kata kunci seperti: demam, batuk, flu, hipertensi, maag, stres, dll.";
}

// Fungsi cek kemiripan kata (Levenshtein Light)
function similarity(a, b) {
    a = a.toLowerCase();
    b = b.toLowerCase();

    let matches = 0;
    let minLength = Math.min(a.length, b.length);

    for (let i = 0; i < minLength; i++) {
        if (a[i] === b[i]) matches++;
    }

    return matches / Math.max(a.length, b.length);
}

// ===========================
// UI CHAT
// ===========================
function sendMessage() {
    const input = document.getElementById("messageInput");
    const text = input.value.trim();
    if (text === "") return;

    addMessage(text, "me");
    input.value = "";

    setTimeout(() => {
        addMessage(getAIReply(text), "bot");
    }, 500);
}

function addMessage(text, sender) {
    const chatBox = document.getElementById("chatBox");
    const msg = document.createElement("div");

    msg.classList.add("msg", sender);
    msg.innerText = text;

    chatBox.appendChild(msg);
    chatBox.scrollTop = chatBox.scrollHeight;
}

</script>

</body>
</html>